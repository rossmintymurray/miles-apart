{# src/MilesApart/StaffBundle/Resources/views/Products/find_product.html.twig #}
{% extends 'MilesApartStaffBundle::layout.html.twig' %}

{#Check if the form has been submitted or not and use the appropriate form template #}
{% if submitted == false %}
    {% form_theme form 'MilesApartAdminBundle:Form:fields.html.twig' 'MilesApartAdminBundle:Form:field_errors.html.twig' %}
{% else %}
    {% form_theme form 'MilesApartAdminBundle:Form:submitted_fields.html.twig' 'MilesApartAdminBundle:Form:field_errors.html.twig' %}
{% endif %}

{#Set active page for interface highlighting #}
{% set active_page = 'products' %}
{% set current_page = 'find_products' %}

{% block page_name %}
    Find product
{% endblock %}

{% block page_title %}
    Find product
{% endblock %}

{# Set the dynamic content for this template #}
{% block page_content %}

    {# Create the form to find supplier #}
    {{ form_start(form) }}
        {{ form_errors(form) }}

        {# Create and show the new admin user type #}
        <fieldset>
            
            {{ form_row(form.product_barcode) }}
            
        </fieldset> 
        <fieldset>
            
            {{ form_row(form.product_name) }}
        </fieldset> 
        <fieldset>
            
            {{ form_row(form.product_supplier_code) }}
    
        </fieldset> 

        <fieldset>
            {{ form_row(form.submit) }}
        </fieldset>  
        
        {{ form_rest(form) }}
    
    {{ form_end(form) }}

    
{% endblock %}

{% block javascripts %}
    <script>
        function onScanAppBarCodeData(bar,t,sid)
        {
            //'bar' is the retrieved Barcode
            //The below function will set the form field
            //named 'barcode' to the value of 'bar'
            $('#milesapart_staffbundle_findproduct_product_barcode').val(bar);

            //Submit the form
            $("form[name='milesapart_staffbundle_findproduct']").submit();

            return true;
        }
    </script>
{% endblock %}
